(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{29:function(t,e,n){"use strict";n.r(e);var i,a,r,c,o,s,d,l,p,h,m,u,j,b,g,x,f,w=n(1),O=n.n(w),v=n(15),y=n.n(v),S=n(7),k=n(3),D=n(4),M=n.p+"static/media/spinner.e558538c.svg",L=n(0),R=D.b.div(i||(i=Object(k.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n"]))),N=D.b.img(a||(a=Object(k.a)(["\n\twidth: 80px;\n\theight: 80px;\n\n\tmargin: 32px;\n\n\tstroke: #ccc;\n\n\tanimation: spin 1s linear infinite;\n\n\t@keyframes spin {\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"]))),U=D.b.div(r||(r=Object(k.a)(["\n\ttext-align: center;\n\n\tspan {\n\t\ttext-decoration: underline;\n\t\tcursor: pointer;\n\t}\n"]))),F=function(t){var e=t.error;return Object(L.jsxs)(R,{children:[Object(L.jsx)(N,{src:M,alt:""}),e?Object(L.jsxs)(U,{children:[Object(L.jsx)("div",{children:e}),Object(L.jsxs)("div",{children:["You may need to"," ",Object(L.jsx)("span",{onClick:window.location.reload,children:"refresh"})," this page."]})]}):Object(L.jsx)(L.Fragment,{})]})},I=n(5),T=n(6),C=D.b.div(c||(c=Object(k.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n\tgrid-template-rows: auto 1fr 1fr 1fr;\n\n\tpadding: 8px;\n\tmargin: 8px;\n\n\tborder-radius: 4px;\n\tbox-shadow: var(--border-shadow);\n\n\ttransition: 0.2s ease;\n\n\t&:hover {\n\t\tbox-shadow: var(--small-shadow);\n\t}\n\n\t// Small devices (landscape phones, 576px and up)\n\t@media (min-width: 576px) {\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgrid-template-rows: auto 1fr 1fr;\n\t}\n\n\t// Large devices (desktops, 992px and up)\n\t@media (min-width: 992px) {\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgrid-template-rows: auto 1fr 1fr;\n\t}\n"]))),P=D.b.div(o||(o=Object(k.a)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\n\t// Small devices (landscape phones, 576px and up)\n\t@media (min-width: 576px) {\n\t\tgrid-column: span 2;\n\t}\n"]))),J=D.b.div(s||(s=Object(k.a)(["\n\tdisplay: flex;\n"]))),W=D.b.div(d||(d=Object(k.a)(["\n\theight: fit-content;\n\n\tmargin: 0 0 0 8px;\n\tpadding: 0;\n\n\tborder: none;\n\tbackground: none;\n\tcolor: var(--text);\n\tfont-size: 1em;\n\n\tcursor: pointer;\n\tpointer-events: initial;\n\n\topacity: ",";\n\tpointer-events: ",";\n"])),(function(t){return t.disabled?"0.1":"1"}),(function(t){return t.disabled?"none":"auto"})),A=D.b.div(l||(l=Object(k.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n\n\t// Small devices (landscape phones, 576px and up)\n\t@media (min-width: 576px) {\n\t\tgrid-column: span 2;\n\t}\n\n\t// Large devices (desktops, 992px and up)\n\t@media (min-width: 992px) {\n\t\tgrid-column: span 2;\n\t}\n"]))),B=D.b.div(p||(p=Object(k.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\n\tfont-size: 6rem;\n\tfont-weight: 700;\n"]))),E=D.b.div(h||(h=Object(k.a)(["\n\tjustify-self: stretch;\n\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\n\t// Medium devices (tablets, 768px and up)\n\t@media (min-width: 768px) {\n\t\tjustify-content: center;\n\t\talign-items: unset;\n\t\tmin-width: 256px;\n\t}\n\n\t// Large devices (desktops, 992px and up)\n\t@media (min-width: 992px) {\n\t\tmin-width: 256px;\n\t}\n"]))),H=function(t){for(var e=t.convertTime,n=t.daysArray,i=t.forceRefetch,a=t.forceRefresh,r=t.iconURL,c=t.weatherData,o=0,s=[],d=[],l=0;l<n[0].length;l++)o+=n[0][l].pop,s.push(n[0][l].main.temp_min),d.push(n[0][l].main.temp_max);var p={clouds:c.clouds.all,date:c.dt,description:c.weather[0].description,feelsLike:Math.round(c.main.feels_like),humidity:c.main.humidity,image:c.weather[0].icon,imageCode:c.weather[0].id,lastUpdated:c.dt,pop:Math.round(o/n[0].length*100),pressure:c.main.pressure,main:c.weather[0].main,sunrise:c.sys.sunrise,sunset:c.sys.sunset,temp:Math.round(c.main.temp),tempMin:Math.round(Math.min.apply(Math,s)),tempMax:Math.round(Math.max.apply(Math,d)),visibility:Math.floor(c.visibility/1e3),windSpeed:c.wind.speed,windDeg:c.wind.deg};return Object(L.jsxs)(C,{children:[Object(L.jsxs)(P,{children:[Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.g,title:"Location"})," ",c.name,",",c.sys.country]}),Object(L.jsxs)(J,{title:i?"Next refresh in 5 min":"",children:[Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.c,title:"Last updated"})," ",e(c.dt)]}),Object(L.jsx)(W,{onClick:a,disabled:!!i,title:"Refresh",children:Object(L.jsx)(I.a,{icon:T.j})})]})]}),Object(L.jsxs)(A,{children:[Object(L.jsx)("img",{src:"".concat(r,"/").concat(p.image,"@2x.png"),alt:p.description}),Object(L.jsx)(B,{children:Object(L.jsxs)("div",{children:[p.temp,"\xb0"]})})]}),Object(L.jsxs)(E,{children:[Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.l,title:"Low"})," ",p.tempMin,"\xb0 / ",Object(L.jsx)(I.a,{icon:T.k,title:"High"})," ",p.tempMax,"\xb0"]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.m,title:"Feels like"})," Feels like ",p.feelsLike,"\xb0"]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.d,title:"Cloud coverage"})," Cloud coverage: ",p.clouds,"%"]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.o,title:"Probability of precipitation"})," ","Precipitation: ",p.pop,"%"]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.n,title:"Humidity"})," Humidity:"," ",p.humidity,"%"]})]}),Object(L.jsxs)(E,{children:[Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.f,title:"Atmospheric pressure"})," ","Pressure: ",p.pressure,"hPa"]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.b,title:"Visibility"})," Visibility:"," ",p.visibility,"km"]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.p,title:"Wind speed/direction"})," Wind:"," ",p.windSpeed,"m/s"," ",Object(L.jsx)(I.a,{icon:T.a,transform:{rotate:p.windDeg},title:"Wind direction"})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.i,title:"Sunrise"})," Sunrise:"," ",e(p.sunrise)]}),Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.h,title:"Sunset"})," Sunset:"," ",e(p.sunset)]})]})]})},z=D.b.div(m||(m=Object(k.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\n\tborder-radius: 4px;\n\tbox-shadow: var(--border-shadow);\n\n\tpadding: 8px;\n\tmargin: 8px;\n\n\ttransition: 0.2s ease;\n\n\timg {\n\t\tmax-width: 100px;\n\t\theight: auto;\n\t}\n\n\t&:hover {\n\t\tbox-shadow: var(--small-shadow);\n\t}\n"]))),Y=D.b.div(u||(u=Object(k.a)(["\n\tdisplay: flex;\n\n\tdiv {\n\t\tmargin: 0 2px;\n\t}\n"]))),_=function(t){var e=t.iconURL,n=t.item,i=t.timeOrDate;return Object(L.jsxs)(z,{children:[Object(L.jsx)("div",{children:i(n.date)}),Object(L.jsx)("img",{src:"".concat(e,"/").concat(n.image,"@2x.png"),alt:n.description}),Object(L.jsxs)("div",{children:[Math.round(n.temp),"\xb0 \u2013 ",n.main]}),Object(L.jsxs)(Y,{children:[n.clouds>10?Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.d,title:"Cloud coverage"})," ",n.clouds,"%"]}):Object(L.jsx)(L.Fragment,{}),n.pop>0?Object(L.jsxs)("div",{children:[Object(L.jsx)(I.a,{icon:T.e,title:"Probability of precipitation"})," ",n.pop,"%"]}):Object(L.jsx)(L.Fragment,{})]})]})},G=D.b.div(j||(j=Object(k.a)(["\n\tdisplay: grid;\n\tgrid-template-rows: repeat(4, 1fr);\n\tgrid-template-columns: initial;\n\n\tmargin: 0;\n\tpadding: 0;\n\n\t// Small devices (landscape phones, 576px and up)\n\t@media (min-width: 576px) {\n\t\tgrid-template-rows: repeat(2, 1fr);\n\t\tgrid-template-columns: repeat(2, 1fr);\n\t}\n\n\t// Large devices (desktops, 992px and up)\n\t@media (min-width: 992px) {\n\t\tgrid-template-rows: initial;\n\t\tgrid-template-columns: repeat(4, 1fr);\n\t}\n"]))),V=function(t){for(var e=t.convertTime,n=t.forecastData,i=t.iconURL,a=[],r=0;r<5;r++){var c={clouds:n.list[r].clouds.all,date:n.list[r].dt,description:n.list[r].weather[0].description,image:n.list[r].weather[0].icon,pop:Math.round(100*n.list[r].pop),main:n.list[r].weather[0].main,temp:Math.round(n.list[r].main.temp)};a.push(c)}return Object(L.jsx)(G,{children:a.slice(0,4).map((function(t,n){return Object(L.jsx)(_,{timeOrDate:e,item:t,iconURL:i},n)}))})},$=D.b.div(b||(b=Object(k.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: initial;\n\tgrid-template-rows: repeat(4, 1fr);\n\n\tmargin: 0;\n\tpadding: 0;\n\n\t// Small devices (landscape phones, 576px and up)\n\t@media (min-width: 576px) {\n\t\tgrid-template-rows: repeat(2, 1fr);\n\t\tgrid-template-columns: repeat(2, 1fr);\n\t}\n\n\t// Large devices (desktops, 992px and up)\n\t@media (min-width: 992px) {\n\t\tgrid-template-columns: repeat(4, 1fr);\n\t\tgrid-template-rows: initial;\n\t}\n"]))),q=function(t){for(var e=t.daysArray,n=t.convertDate,i=t.iconURL,a=[],r=1;r<6;r++){for(var c=0,o=0,s=0,d=0;d<e[r].length;d++)c+=e[r][d].clouds.all,o+=e[r][d].pop,s+=e[r][d].main.temp;var l={clouds:Math.round(c/e[r].length),date:e[r][Math.ceil(e[r].length/2)].dt,description:e[r][Math.ceil(e[r].length/2)].weather[0].description,image:e[r][Math.ceil(e[r].length/2)].weather[0].icon.substring(0,e[r][Math.ceil(e[r].length/2)].weather[0].icon.length-1)+"d",pop:Math.round(o/e[r].length*100),main:e[r][Math.ceil(e[r].length/2)].weather[0].main,temp:Math.round(s/e[r].length)};a.push(l)}return Object(L.jsx)($,{children:a.slice(0,4).map((function(t,e){return Object(L.jsx)(_,{timeOrDate:n,item:t,iconURL:i},e)}))})},K=D.b.div(g||(g=Object(k.a)([""]))),Q=function(t){for(var e=t.convertDate,n=t.convertTime,i=t.forceRefetch,a=t.forceRefresh,r=t.forecastData,c=t.weatherData,o="http://openweathermap.org/img/wn",s=[],d=function(t){var e=(new Date).setFullYear((new Date).getFullYear(),0,1),n=Math.floor(e/864e5);return Math.ceil(t.getTime()/864e5)-n},l=function(t){s.push(r.list.filter((function(e){return d(new Date(1e3*e.dt))===d(new Date)+t})))},p=0;p<6;p++)l(p);return Object(L.jsxs)(K,{children:[Object(L.jsx)(H,{convertDate:e,convertTime:n,daysArray:s,forceRefetch:i,forceRefresh:a,iconURL:o,weatherData:c}),Object(L.jsx)(V,{convertTime:n,forecastData:r,iconURL:o}),Object(L.jsx)(q,{convertDate:e,daysArray:s,iconURL:o})]})},X=Object(D.a)(x||(x=Object(k.a)(["\n  html {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    min-height: 100%;\n\n    background-color: var(--background);\n    color: var(--text);\n\n    :root{\n      --border-shadow: 0px 0px 0px 0px rgba(0, 0, 0, 0.1),\n\t\t0px 0px 0px 1px rgba(0, 0, 0, 0.15);\n      --small-shadow: 0px 0px 16px 0px rgba(0, 0, 0, 0.15),\n\t\t\t0px 4px 8px -4px rgba(0, 0, 0, 0.5);\n      --big-shadow: 0px 0px 32px 0px rgba(0, 0, 0, 0.15),\n\t\t\t0px 8px 24px -8px rgba(0, 0, 0, 0.5);\n    }\n\n    // Light theme\n    @media (prefers-color-scheme: light) {\n      :root {\n        --text: #333;\n        --background: #fff;\n      }\n    }\n    // Dark theme\n    @media (prefers-color-scheme: dark) {\n      :root{\n        --text: #ccc;\n        --background: #222;\n      }\n\n      background-color: var(--background);\n      color: var(--text);\n    }\n  }\n\n  body {\n    width: 100%;\n\n    margin: 0;\n\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n\n    // Medium devices (tablets, 768px and up)\n    @media (min-width: 768px) {\n      width: unset;\n    }\n  }\n\n  #root{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n"]))),Z=D.b.div(f||(f=Object(k.a)(["\n\tmargin: 0px;\n\tpadding: 8px;\n\n\twidth: 100%;\n\n\tborder-radius: 8px;\n\tbox-shadow: var(--big-shadow);\n\n\ttransition: 0.2s ease;\n\n\t// Small devices (landscape phones, 576px and up)\n\t@media (min-width: 576px) {\n\t\tmargin: 32px;\n\t}\n\n\t// Medium devices (tablets, 768px and up)\n\t@media (min-width: 768px) {\n\t\tmax-width: 768px;\n\t}\n\n\t// Large devices (desktops, 992px and up)\n\t@media (min-width: 992px) {\n\t\twidth: unset;\n\t\tmax-width: 992px;\n\t}\n"])));var tt=function(){var t=Object(w.useState)(null),e=Object(S.a)(t,2),n=e[0],i=e[1],a=Object(w.useState)(),r=Object(S.a)(a,2),c=r[0],o=r[1],s=Object(w.useState)(!1),d=Object(S.a)(s,2),l=d[0],p=d[1],h=Object(w.useState)(),m=Object(S.a)(h,2),u=m[0],j=m[1],b=Object(w.useState)(!1),g=Object(S.a)(b,2),x=g[0],f=g[1],O=Object(w.useState)([]),v=Object(S.a)(O,2),y=v[0],k=v[1],D=Object(w.useState)(!1),M=Object(S.a)(D,2),R=M[0],N=M[1],U=Object(w.useState)([]),I=Object(S.a)(U,2),T=I[0],C=I[1],P=Object(w.useState)(!1),J=Object(S.a)(P,2),W=J[0],A=J[1],B=Object(w.useState)(!1),E=Object(S.a)(B,2),H=E[0],z=E[1],Y="https://api.openweathermap.org/data/2.5",_="88f8e8a58d8479319be8c6845d6d1a75";return Object(w.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(t){o(t.coords.latitude),p(!0),j(t.coords.longitude),f(!0)}))})),Object(w.useEffect)((function(){var t=function(){fetch("".concat(Y,"/weather/?lat=").concat(c,"&lon=").concat(u,"&units=metric&appid=").concat(_)).then((function(t){return t.json()})).then((function(t){200!==t.cod?i(t.message):(k(t),localStorage.setItem("weatherData",JSON.stringify(t)))}))},e=function(){fetch("".concat(Y,"/forecast?lat=").concat(c,"&lon=").concat(u,"&units=metric&appid=").concat(_)).then((function(t){return t.json()})).then((function(t){"200"!==t.cod?i(t.message):(C(t),localStorage.setItem("forecastData",JSON.stringify(t)))}))};null===localStorage.getItem("weatherData")||null===localStorage.getItem("forecastData")?l&&x?(e(),t(),N(!0),A(!0),i()):i("Need both coordinates to fetch weather data. Please allow location access."):H?(e(),t(),N(!0),A(!0)):"200"===JSON.parse(localStorage.getItem("forecastData")).cod&&200===JSON.parse(localStorage.getItem("weatherData")).cod?Date.now()-1e3*JSON.parse(localStorage.getItem("weatherData")).dt>72e5?l&&x?(t(),e(),N(!0),A(!0),i()):i("Need both coordinates to fetch weather data. Please allow location access."):(k(JSON.parse(localStorage.getItem("weatherData"))),C(JSON.parse(localStorage.getItem("forecastData"))),N(!0),A(!0)):i("weather error: ".concat(JSON.parse(localStorage.getItem("weatherData")).message,"\n          forecast error: ").concat(JSON.parse(localStorage.getItem("forecastData")).message))}),[_,Y,u,c,l,x,y.dt,H]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(X,{}),R&&200===y.cod&&W&&"200"===T.cod?Object(L.jsx)(Z,{children:Object(L.jsx)(Q,{convertDate:function(t){return new Date(1e3*t).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"numeric",year:"numeric"})},convertTime:function(t){return new Date(1e3*t).toLocaleTimeString("en-GB",{hour12:!1,hour:"numeric",minute:"numeric"})},forceRefetch:H,forceRefresh:function(){z(!0),setTimeout((function(){z(!1),clearTimeout()}),3e5)},forecastData:T,weatherData:y})}):Object(L.jsx)(F,{error:n})]})},et=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nt(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var it=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),i(t),a(t),r(t),c(t)}))};y.a.render(Object(L.jsx)(O.a.StrictMode,{children:Object(L.jsx)(tt,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/weather-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/weather-app","/service-worker.js");et?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):nt(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):nt(e,t)}))}}(),it()}},[[29,1,2]]]);
//# sourceMappingURL=main.3ec2cf39.chunk.js.map